# TIL 

## 어떤 공부를 했는지 or 문제가 있었는지
  - 알고리즘: [최빈값 구하기](https://github.com/Tap-Kim/algorithm-history/blob/main/programmers/최빈값%20구하기.md)
  - 테스트 코드 의존성 관련 아티클 정독

## 내가 시도해본 것들
  - 알고리즘
    - Map 자료 구조를 사용하여 `key-value` 초기 구성 셋팅
    - 최빈값 `Math.max` 추출 시도
    - 중복 최빈값 체크 시도 - 배열, 변수 시도
    - 초기 배열 정렬 시도
  - 테스트 코드 의존성 관련 자료 조사
    - [프론트엔드 테스트 코드와 의존성 - 한재엽님](https://blog.jbee.io/articles/developments/프론트엔드%20테스트%20코드와%20의존성)
    - [자바스크립트와 의존성 - 스탁벅스님](https://velog.io/@stakbucks/필요한-부분만-바꾸기)
    - [JavaScript dependency injection in Node – friend or foe? - Adam Polak](https://tsh.io/blog/dependency-injection-in-node-js/)

## 어떻게 해결했는지
  - 알고리즘
    - Map을 자료구조를 그대로 가져갔고, `Math.max`시도시 중복 최빈값 체크가 어려움이 있어서 제거
    - 초기 배열정렬하는 것이 아닌 `Map` 자료구조에서 `[...new Map()].sort()` 사용시 가능한 것을 확인하여, 빈도 값 해쉬 정보를 정렬
    - 내림 차순 정렬을 진행하여, 최빈 값이 중복일시 -1 반환하고 그 외 맨 앞 배열의 `key` 정보를 반환

## 무엇을 새롭게 알았는지
  - 알고리즘
    - 문제를 잘못 읽어 최빈 값을 반환하는 것이 아닌 `key` 정보를 반환해야 했음. 문제를 좀 더 꼼꼼히 살펴볼 것
    - `Map`을 배열의 전개 연산자로 표현하면 `entires`의 배열 정보로 반환된다는 사실을 처음알게 됨
  - 테스트 코드 의존성 관련 자료 조사
    - 테스트할 `대상`을 명확히
      - 테스트 작성시 테스트 대상에 따라서 모킹 해야하는 상황이 매번 다르다. 또한 모킹된 객체로 인해 제때 초기화해주지 않으면 다른 테스트에 영향을 끼치게 된다.
      - 우리 테스트를 하는 것을 모킹한 동작을 테스트하고 싶은게 아니라, 로직을 테스트하는 것을 초점을 맞춰야한다.
      - _변경될 내용을 미리 예측해서 외부에서 받도록하자!_
      - _너무 큰 단위의 테스트를 하려고 모킹을 하는 것에 필요 이상의 힘을 쏟지말자!_
    - 프론트엔드에서 테스트 코드 작성이 어려운이유?
      1. 제품이 동작하는 `환경`과 테스트가 실행되는 `환경`이 다르다.
        - Node.js vs Browser
        - 우리가 작성한 앱의 대부분은 `브라우저`에서 동작하길 기대하고 DOM 또는 Window에 접근한다. 하지만 `jest` 환경에선 브라우저에서 동작하는 것이 아니라 터미널 즉, Node.js 환경에서 동작한다.
이처럼 테스트가 돌아가는 `런타임 환경`의 차이로 인해 작성이 어려워진다.
      3. 많은 것들 `의존`하는 경우가 대부분이다.
        - A가 B에 의존하는 기능, 서비스를 사용한다. A 컴포넌트가 B의 hook 또는 라이브러리 함수 등을 의존하게 된다. 이 객체간의 관계가 독립적으로 움직이는 의존성들을 하나의 프로세스로 결합해야하는데, 이런 과정에서 테스트 환경에서 이해 할수 있도록 mock을 구성하거나 프로세스를 구성해줘야한다.
    - 앱의 의존성
      > Browser Runtime API (Web API) → window.*
      alert, confirm
      local storage, session storage
      setTimeout
      …
      >
      > DOM (Document Object Model) → document.*
      querySelector
      addEventListener
      …
      - 당연히 존재할 것이라고 생각한 이 구조는 `브라우저 환경`을 의존하고 있다. 또는 API 서버와 의존하기도 한다.
    - 의존성 주임
      - 의존성을 복제하는 방법(jsdom, react-dom)과 같이 DOM 영역을 복제해서 사용이 가능하고, 주입도 가능하다.
      - 보통 의존성 주입을 위해 함수나 클래스에서 컴포넌트나 로직 내부에서 의존성 역전을 하는 경우가 많지만, 좀더 안전하고 확실한 테스트 작성을 위해서 별도로 함수를 분리하고 의존성을 객체 정보를 외부에서 받아온게한다.(매개변수)
    - 계약
      - Context API와 같이 의존성 주입을 진행할시, 상위에 Provider를 선언하여 의존성을 주입한다. 또한 사용되는 컴포넌트에선 useConext 훅을 사용하여 내부 의존성 주입을 수행한다.
      - 이처럼 의존성 주입이 묶인 환경에선 외부 의존성을 분리하여 Wrapper 처럼 감싼 형태로 구성하여 별도로 테스틑 작성이 가능하다.
      - 직접적으로 참조하여 테스트를 작성하지 못하는 경우 상황에 따라 적절하게 `생성`해서 `주입`해줄 수 있다면 기능이 외부에 의존했더라도 환경에따라 다르게 작성이 가능하다.
     
      - 
